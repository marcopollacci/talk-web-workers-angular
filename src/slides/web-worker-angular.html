<p-slide class="center">
  <img src="img/angular-logo.png" alt="angular logo" class="alter-image-size" style="--image-start-size: 6.5em" />
  <h3 class="main-gradient" style="margin-block-start: 0.3em">Angular Web Workers</h3>
</p-slide>
<p-slide>
  <h4 style="margin-block-end: 0.5em">⚙️ <span class="main-sub-gradient">Angular CLI</span></h4>
  <pre class="small-line" data-label-file="terminal">
    <code class="language-markdown">
      ng g web-worker services/worker-test
      
      </code><p-fragment><code class="language-javascript">CREATE src/app/services/worker-test.worker.ts (157 bytes)</code></p-fragment>
      <p-fragment><code class="language-javascript">CREATE tsconfig.worker.json (334 bytes)</code></p-fragment>
      <p-fragment><code class="language-javascript">UPDATE angular.json (2946 bytes)</code></p-fragment>
      <p-fragment><code class="language-javascript">UPDATE src/app/services/worker-test.service.ts (537 bytes)</code></p-fragment>
    </pre>
  <p-notes>
    <p><b>angular.json:</b> new property WebWorkerTsConfig inside build --> options that refer to tsconfig.worker.json</p>
  </p-notes>
</p-slide>
<p-slide>
  <pre class="small-line" data-label-file="worker-test.worker.ts">
    <code class="language-javascript">
      /// &lt;reference lib="webworker" />

      addEventListener('message', ({ data }) => {
        const response = `worker response to ${data}`;
        postMessage(response);
      });

    </code>
    </pre>
  <p-notes>
    The /// &lt;reference lib="webworker" /> directive is a TypeScript declaration that tells the compiler to include the type definitions specific to Web Workers. <br /><br />What
    is it for? By default, TypeScript uses DOM types, which include APIs like document, window, etc. However, Web Workers do not have access to these APIs (for example, window does
    not exist in a worker). In Angular, when you create a Web Worker, this directive ensures that TypeScript uses the correct set of types, providing only the APIs available in a
    Web Worker, such as postMessage, onmessage, and other global objects typical of a worker.
  </p-notes>
</p-slide>
<p-slide>
  <pre class="small-line" data-label-file="worker-test.worker.ts">
    <code class="language-javascript mid-dimension">
      // ...
      export class WorkerTestService {
        constructor() { }
      }
      </code>
    <p-fragment><code class="language-javascript mid-dimension">if (typeof Worker !== 'undefined') {
        // Create a new
        const worker = new Worker(new URL('./worker-test.worker', import.meta.url));</code></p-fragment>
      <p-fragment><code class="language-javascript mid-dimension">worker.onmessage = ({ data }) => {
          console.log(`page got message: ${data}`);
        };
        worker.postMessage('hello');</code></p-fragment>
    <p-fragment><code class="language-javascript mid-dimension">} else {
        // Web Workers are not supported in this environment.
        // You should add a fallback so that your program still executes correctly.
      }</code></p-fragment>
    </pre>
</p-slide>
